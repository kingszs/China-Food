{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-761819b8\"],{\"99af\":function(e,t,a){\"use strict\";var s=a(\"23e7\"),n=a(\"da84\"),i=a(\"d039\"),o=a(\"e8b5\"),r=a(\"861d\"),c=a(\"7b0b\"),u=a(\"07fa\"),d=a(\"8418\"),l=a(\"65f0\"),p=a(\"1dde\"),f=a(\"b622\"),h=a(\"2d00\"),b=f(\"isConcatSpreadable\"),m=9007199254740991,v=\"Maximum allowed index exceeded\",g=n.TypeError,x=h>=51||!i((function(){var e=[];return e[b]=!1,e.concat()[0]!==e})),w=p(\"concat\"),k=function(e){if(!r(e))return!1;var t=e[b];return void 0!==t?!!t:o(e)},_=!x||!w;s({target:\"Array\",proto:!0,forced:_},{concat:function(e){var t,a,s,n,i,o=c(this),r=l(o,0),p=0;for(t=-1,s=arguments.length;t<s;t++)if(i=-1===t?o:arguments[t],k(i)){if(n=u(i),p+n>m)throw g(v);for(a=0;a<n;a++,p++)a in i&&d(r,p,i[a])}else{if(p>=m)throw g(v);d(r,p++,i)}return r.length=p,r}})},a55b:function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"tab\"},[a(\"div\",{attrs:{id:\"backhome\"},on:{click:[function(e){e.stopPropagation()},e.backHome]}},[a(\"van-icon\",{attrs:{name:\"arrow-left\",size:\"25px\"}}),a(\"span\",[e._v(\"回首页\")])],1),a(\"div\",{staticClass:\"title\"},[e._v(\"一起发现美食\")]),a(\"div\",[a(\"van-form\",{attrs:{\"validate-first\":\"\"},on:{failed:e.onFailed,submit:e.onSubmit}},[a(\"van-field\",{ref:\"input_user\",staticClass:\"user\",attrs:{name:\"用户名\",label:\"用户名\",placeholder:e.pu,rules:[{required:e.emptyTest,message:\"\"}]},on:{blur:e.blurUser},model:{value:e.username,callback:function(t){e.username=t},expression:\"username\"}}),a(\"van-field\",{ref:\"input_pd\",staticClass:\"pd\",attrs:{type:\"password\",name:\"密码\",label:\"密码\",placeholder:e.pd,rules:[{required:!0,message:\"\"}]},on:{blur:e.blurPwd},model:{value:e.pwd,callback:function(t){e.pwd=t},expression:\"pwd\"}}),a(\"div\",{staticStyle:{margin:\"16px\"}},[a(\"van-button\",{attrs:{round:\"\",block:\"\",type:\"info\",\"native-type\":\"submit\",disabled:!e.checked}},[e._v(\" 登录 \")])],1)],1),a(\"van-divider\",{style:{color:\"#1989fa\",borderColor:\"#1989fa\",padding:\"0 16px\"}},[e._v(\" or \")]),a(\"div\",{staticStyle:{margin:\"16px\"}},[a(\"van-button\",{attrs:{round:\"\",block:\"\",to:\"/register\"},on:{click:function(e){e.stopPropagation()}}},[e._v(\" 注册 \")])],1)],1),a(\"van-checkbox\",{staticStyle:{\"margin-top\":\"40px\",\"font-size\":\"12px\"},model:{value:e.checked,callback:function(t){e.checked=t},expression:\"checked\"}},[e._v(\" 我已阅读并同意 \"),a(\"router-link\",{attrs:{to:\"#\"}},[e._v(\"用户协议\")]),e._v(\" 和 \"),a(\"router-link\",{attrs:{to:\"#\"}},[e._v(\"隐私政策\")])],1)],1)},n=[],i=(a(\"99af\"),{data:function(){return{checked:!0,username:\"\",pwd:\"\",password:/^(\\w){6,20}$/,pd:\"密码\",pu:\"用户名\"}},methods:{blurUser:function(){\"\"==this.username&&(this.pu=\"请输入用户名\")},blurPwd:function(){\"\"==this.pwd&&(this.pd=\"请输入密码\")},emptyTest:function(){return!!(this.uisername=\"\")},backHome:function(){this.$router.push(\"/\")},onFailed:function(e){var t=this;console.log(\"failed\",e),\"\"==this.username?this.$dialog.alert({message:\"用户名不能为空\"}).then((function(){t.$nextTick((function(){t.$refs.input_user.focus()}))})):\"\"==this.pwd&&this.$dialog.alert({message:\"密码不能为空\"}).then((function(){t.$nextTick((function(){t.$refs.input_pd.focus()}))}))},onSubmit:function(e){var t=this,a=\"username=\".concat(this.username,\"&password=\").concat(this.pwd);this.axios.post(\"/login\",a).then((function(e){200==e.data.code?(t.$store.dispatch(\"getUser\",t.username),t.axios.get(\"/user?username=\".concat(t.username)).then((function(e){t.$store.dispatch(\"getUserId\",e.data.result[0].user_id),t.$store.dispatch(\"getUserPic\",e.data.result[0].pic),console.log(e),sessionStorage.setItem(\"userName\",e.data.result[0].username),sessionStorage.setItem(\"userId\",e.data.result[0].user_id),sessionStorage.setItem(\"userPic\",e.data.result[0].pic),t.$router.push(\"/aboutme\")}))):(t.onload,t.$dialog.alert({message:\"用户名或者密码错误\"}).then((function(){t.username=\"\",t.pwd=\"\",t.$nextTick((function(){t.$refs.input_user.focus()}))})))}))}},mounted:function(){var e=this;this.$nextTick((function(){e.$refs.input_user.focus()}))},watch:{data:function(e,t){}}}),o=i,r=(a(\"e146\"),a(\"2877\")),c=Object(r[\"a\"])(o,s,n,!1,null,\"f1928866\",null);t[\"default\"]=c.exports},b6db:function(e,t,a){var s=a(\"be21\");s.__esModule&&(s=s.default),\"string\"===typeof s&&(s=[[e.i,s,\"\"]]),s.locals&&(e.exports=s.locals);var n=a(\"499e\").default;n(\"6283bcdc\",s,!0,{sourceMap:!1,shadowMode:!1})},be21:function(e,t,a){var s=a(\"24fb\");t=s(!1),t.push([e.i,\"#backhome[data-v-f1928866]{display:block;height:25px;width:100px;position:absolute;top:20px;left:10px;font-size:12px;font-weight:100;display:flex;align-items:center}#backhome span[data-v-f1928866]{display:block}.tab[data-v-f1928866]{width:100vw;height:100vh;display:flex;align-items:center;flex-flow:column;justify-content:center}.tab .title[data-v-f1928866]{font-size:28px;position:fixed;font-weight:700;text-align:center;top:50px}.tab .password[data-v-f1928866],.tab .phone[data-v-f1928866]{border:1px solid #ebedf0}\",\"\"]),e.exports=t},e146:function(e,t,a){\"use strict\";a(\"b6db\")}}]);","extractedComments":[]}